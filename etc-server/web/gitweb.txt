Git Web
-------

To configure Git Web on a server, you need to install git and gitweb packages.
With Apache, the configuration is already included within the gitweb package.
With Nginx, you need FastCGI (fcgiwrap package on Debian) and some
configuration in an host file.

Nginx configuration for a /git subfolders of a website
------------------------------------------------------

server {
    listen 80 default_server;
    listen [::]:80 default_server ipv6only=on;

    #root /var/www/...;
    # Server name is used in the title of GitWeb pages
    #server_name www.example.com;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # Git over HTTP
    # Remove git-receive-pack to forbid push to this server
    location ~ ^/git/.*\.git/objects/([0-9a-f]+/[0-9a-f]+|pack/pack-[0-9a-f]+.(pack|idx))$ {
        root /home/git;
    }
    location ~ ^/git/(.*\.git/(HEAD|info/refs|objects/info/.*|git-(upload|receive)-pack))$ {
        rewrite ^/git(/.*)$ $1 break;
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        fastcgi_param SCRIPT_FILENAME     /usr/lib/git-core/git-http-backend;
        fastcgi_param PATH_INFO           $uri;
        fastcgi_param GIT_PROJECT_ROOT    /home/git;
        fastcgi_param GIT_HTTP_EXPORT_ALL "";
        include fastcgi_params;
    }

    # Git web
    location /git/static/ {
        alias /usr/share/gitweb/static/;
    }
    location /git/ {
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
        fastcgi_param SCRIPT_FILENAME     /usr/share/gitweb/gitweb.cgi;
        fastcgi_param PATH_INFO           $uri/git;
        fastcgi_param GITWEB_CONFIG       /home/git/gitweb.conf;
        fastcgi_param GIT_HTTP_EXPORT_ALL "";
        include fastcgi_params;
    }
}
